[tox]
isolated_build = true
envlist = py311

[testenv]
whitelist_externals = poetry
commands =
    poetry install
    poetry run coverage erase
    poetry run coverage run -m pytest {posargs:tests}
    poetry run coverage report
    poetry run coverage xml

[pytest]
env =
    CARNAGE_ENVIRONMENT=development
    # A random fernet key generated for testing purposes
    CARNAGE_CHAT_SECRET_KEY=hd7OdCnHW-nBhESehwSvDVO9_twt31KTcI_so-6YmdA=
    JWT_SECRET_KEY=tox
    JWT_ALGORITHM=HS256
